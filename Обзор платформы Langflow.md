# **Введение**

Согласно документации, Langflow позиционируется как платформа с открытым исходным кодом для визуального создания AI приложений. Она поддерживает важную AI функциональность как ИИ агенты и MCP серверы. Данная платформа может помочь в разработке таких AI приложений, как чат-боты, агенты,  RAG системы и др.  Она включает несколько готовых шаблонов, которые можно использовать и адаптировать под нужды бизнеса.

# **Цель документа**

Цель данного документа является всестороннее и полное описание платформы Langflow с точки зрения разработки ИИ агентов и внедрения их в системы банка.

# **Содержание документа**

Данный документ включает в себя следующие разделы:

1. Разработка и конфигурация — раздел, описывающий аспекты разработки ИИ агентов на платформе Langflow.  
2. Исполнение решений — раздел, описывающий методы исполнения разработанного решения на платформе Langflow.  
3. Мониторинг моделей и логирование — раздел, описывающий инструменты логирования схем и мониторинга моделей на платформе Langflow.   
4. Управление жизненным циклом — раздел, описывающий инструменты управления и версионирования разработанных решений на Langflow.  
5. Выводы — раздел, подводящий итоги использования Langflow с точки зрения разработки ИИ агентов для систем банка.

## **Разработка и конфигурация**

Платформа Langflow предоставляет визуальный конструктор для проектирования цепочек, состоящих из блоков. Каждый из блоков принимает определенные данные на вход, обрабатывает данные согласно алгоритму и выдает результат следующему блоку.  Каждый из блоков может принимать только типы данных, определенные в платформе Langflow. Наиболее часто используемые типы данных следующие:

* Data — структура данных, хранящие информацию в формате «ключ-значение».  
* DataFrame — структура данных, представляющих из себя таблицу, похожую на структуру данных pandas DataFrame.  
* Message — структура данных, представляющих из себя строку.  
* Embeddings — латентный вектор, являющимся результатом embeddings моделей.

Данная платформа позволяет создавать пользовательские блоки, используя язык программирования Python. Платформа Langflow также предоставляет некоторые готовые блоки, однако, в основном они нацелены на алгоритмы, использующие LLM. Как пример, Langflow предоставляет блоки для взаимодействия с некоторыми LLM API, например: OpenAI, Anthropic и др. Данная платформа также предоставляет определенные логические блоки, например “Loop”, “If-else конструкция”, однако с определенными ограничениями. В итоге платформа имеет следующие ограничения с точки зрения разработки:

1. Langflow поддерживает только определенные входные и выходные типы данных, что усложняет разработку. Нельзя использовать пользовательские типы данных для последующей передачи между блоками.  
2. Langflow предоставляет готовые блоки, ориентирующийся на алгоритмы, использующие LLM. Для обработки данных другого типа, например, табличные данные, платформа предоставляет блоки с очень ограниченным функционалом. Это очень сильно усложняет разработку схемы, которая предполагает не только простого общения с LLM моделью.  
3. Некоторые готовые блоки Langflow сложно кастомизировать ввиду отсутствия информации в документации. Поскольку некоторые готовые блоки реализовывают специализированные интерфейсы, например LCModelComponent, инструкций по их реализации не указано в документации. В итоге данное ограничение усложняет разработку и поддержку решений на Langflow.  
4. Платформа Langflow предоставляет логические блоки с очень ограниченным функционалом. Как пример, некоторые логические блоки имеют следующие ограничения:  
   1. В логическом блоке “Loop” отсутствует возможность обрабатывать исключительные ситуации ввиду внутренней реализации схем на базе графа. В итоге это приведет к созданию огромных и запутанных схем, что усложнит дальнейшую поддержку и сопровождение решений, а также и разработку самой схемы.  
   2. Платформа Langflow предоставляет единственный блок для условных операций “If-Else”, который может производить сравнение только между двумя строками. Также, ввиду внутренней реализации схем на базе графа, не представляется возможным использование условного оператора внутри циклов. Всё в совокупности делает разработку решений, требующих использования условных операторов, избыточно сложной.  
   3. Платформа Langflow не предоставляет возможность оборачивать более одного блока за раз (например, несколько связанных последовательных блоков или тело цикла) в конструкцию “Try-Except”, что усложняет разработку отказоустойчивой схемы.  
5. Некоторые готовые блоки имеют неправильную реализацию. В качестве примера, встроенный блок “Files” выдает ошибку при чтении файла формата xlsx. Встроенный блок “Loop” выдает в исключительных ситуациях пустую строку в качестве итерации. Это приведет к необходимости изменять встроенные блоки платформы, что в итоге усложнит разработку ИИ агентов.  
6. Платформа Langflow не предоставляет готовые блоки для обучения и fine-tuning моделей, что очень усложняет разработку обучающего pipeline.  
7. Платформа Langflow не предоставляет готовые блоки для построения графиков. Также данная платформа не имеет никаких других инструментов для визуализации данных.  
8. Платформа Langflow не предоставляет никакого функционала IDE, за исключением подсветки синтаксиса, для написания кода в пользовательских блоках, что усложняет реализацию решений и их тестирование.

## **Исполнение решений**

Данная платформа предоставляет возможность использовать разработанные схемы через API. API предоставляет endpoints для реализации следующего ключевого функционала:

* Работа с файлами — загрузка файлов на сервер из машины пользователя, загрузка файлов из сервера на машину пользователя, удаление файлов, получения списка файлов на сервере.  
* Работа с Flow — запуск существующего Flow с возможностью передачи входных данных и получения ответа, запуск существующего Flow с возможностью изменения параметров отдельных компонент, запуск Flow при помощи webhooks, модификация отдельных компонент.

Платформа Langflow не предоставляет встроенной возможности исполнения схемы на основе событий. Как пример, нельзя запустить внутри данной платформы разработанную схему по расписанию. В результате для настройки работы Flow по расписанию необходима интеграция с внешними решениями, например Airflow.

## **Мониторинг моделей и логирование**

ХАЙ THERE  
Саня ты в порядке, ты в порядке Саня

Хай, давай определимся кое с чем:

1. Мониторинг модели (в глоссарии уже есть) — процесс отслеживания метрик качества для моделей ИИ.  
2. логирование (логирование схем, добавлю в глоссарий) \- процесс отслеживания состояния запуска схем

внутренние логи (именно логи самого приложения langflow, которые капают в контейнере, где можно увидеть через docker logs), как мне кажется, не сильно важно. Важно именно логи запуска схем.  
Вот обновленный раздел:

Данная платформа имеет встроенный базовый инструмент логирования схем. После запуска схемы, данный функционал предоставляет логи для блоков. Данные логи содержат следующую информацию:

* Идентификатор блока схемы для определения конкретного блока  
* Временную метку исполнения блока схемы для возможности фильтрации по времени  
* Статус исполнения блока схемы  
* Результат исполнения блока схемы для отслеживания состояния обработанных данных  
* Идентификатор схемы для возможности фильтрации логов по определенному экземпляру

Однако, в встроенном инструменте логирования схем отсутствует следующая информация:

* Идентификатор запускаемой сессии для возможности отслеживания логов только необходимого исполнения  
* Количество потраченных токенов (стоимость запроса) при вызове стороннего сервиса, который предоставляет  LLM модель 

Платформа Langflow поддерживает возможность передачи данных через некоторые сторонние приложения для более продвинутого отслеживания состояния запусков решений (observability): Arize, Langfuse, LangSmith, LangWatch, Opik, Traceloop. Платформа Langflow не предоставляет удобного и встроенного функционала для мониторинга моделей. В данной платформе отсутствуют dashboards с метриками созданных ИИ агентов, что в итоге сильно усложнит этап валидации моделей машинного обучения и искусственного интеллекта.

Логирование в Langflow предоставляет следующие возможности:

* хранение логов в формате JSON отдельно для каждой схемы  
* логи хранятся для каждого блока схемы отдельно  
* визуальный интерфейс для просмотра логов  
* API endpoint /logs для получения логов


Однако, оно обладает следующими недостатками:

* визуальный интерфейс не предоставляет возможности фильтрации логов в разрезе отдельных запусков схемы  
* API позволяет определить только количество записей до/после определенной временной метки, без возможности фильтрации

Данная платформа предоставляет базовый функционал для логирования разработанных схем. Платформа Langflow хранит логи в формате JSON с структурированными метаданными для каждой схемы отдельно. После запуска схемы, данная платформа предоставляет логи для каждого блока схемы, однако отсутствует возможность фильтрации логов по конкретному запуску. Платформа Langflow не предоставляет функционал для мониторинга моделей. В данной платформе отсутствуют dashboards с метриками созданных ИИ агентов, что в итоге сильно усложнит этап валидации моделей машинного обучения и искусственного интеллекта.

## **Управление жизненным циклом**

Платформа Langflow не предоставляет инструменты для управления жизненным циклом разработанной схемы. В данной платформе отсутствует возможность версионирования разработанной схемы, отката неправильных изменений. Также платформа Langflow не предоставляет удобной возможности настроить unit тестирование для разработанных схем.

## **Выводы**

Платформа Langflow — это low-code инструмент для разработки ИИ агентов. Ввиду всех описанных выше аспектов, данная платформа подойдет исключительно для прототипирования простых ИИ агентов, где не подразумевается сложная и нелинейная обработка данных и fine-tuning существующих LLM моделей.  Также данная платформа не подходит для прототипирования алгоритмов, предполагающих использования других форматов данных (изображения, таблицы, временные ряды), ввиду отсутствия блоков и интеграций с не-LLM сервисами.

# **Глоссарий**

Для обеспечения ясности и единого понимания в данном документе используются следующие определения:

3. API (Application Programming Interface) — это программный интерфейс, который позволяет разным приложениям и сервисам взаимодействовать друг с другом, обмениваться данными и функциями.  
4. Dashboard — интерактивная визуальная панель управления,  которая отображает в одном месте и в понятном виде ключевые показатели для дальнейшего принятия решений.  
5. Embeddings модель — это алгоритм, который преобразует сложные данные (тексты, изображения) в числовые векторы, размещенные в многомерном пространстве, где схожие по смыслу или характеристикам объекты оказываются рядом друг с другом.  
6. Endpoints — это набор URL-адресов, которые используются для взаимодействия с сервером, чтобы получить доступ к определенным ресурсам или функциям.  
7. Fine-tuning — метод обучения, при котором уже предварительно обученная модель дополнительно тренируется на меньшем целевом наборе данных для выполнения специфических задач.  
8. Flow — набор логически связанных между собой компонент, исполняющих некоторую задачу.  
9. IDE (Integrated Development Environment) — это комплексное приложение, объединяющее все инструменты для создания программного обеспечения (редактор кода, компилятор или интерпретатор, отладчик, инструменты сборки).  
10. LLM (Large Language Model) — это модель искусственного интеллекта, обученная на огромных массивах текстовых данных, чтобы понимать, обрабатывать и генерировать человеческий язык (текст), а также выполнять сложные задачи, такие как ответы на вопросы и генерация контента.  
11. Low-code платформа — среда разработки приложений, которая позволяет создавать программы с минимальным участием написания кода, используя визуальные конструкторы.  
12. MCP (Model Context Protocol) — протокол, с помощью которого системы искусственного интеллекта могут подключаться и взаимодействовать с внешними источниками данных и сервисами.  
13. MCP-сервер — это сервис, который предоставляет модели доступ к какому-либо ресурсу, инструменту или данным в стандартизированном виде.  
14. Observability — это свойство системы, которое позволяет понять её внутреннее состояние и поведение, основываясь только на внешних данных (логах).  
15. RAG (Retrieval Augmented Generation) система — это архитектура для построения систем искусственного интеллекта, которая позволяет языковой модели (LLM) получать доступ к внешним источникам данных и генерировать ответы на их основе. Данная система состоит из следующих этапов:  
    1. Retrieval (извлечение) — этап, на котором система, получив от пользователя запрос, выполняет семантический или гибридный поиск по специализированному, предварительно подготовленному хранилищу фрагментов данных.  
    2. Augmented (обогащение) — этап, на котором извлеченные и наиболее подходящие фрагменты данных формально объединяются с исходным запросом пользователя для формирования расширенной инструкции для модели.  
    3. Generation (генерация) — финальный этап, на котором инструкция передается языковой модели (LLM). Задача модели — строго сгенерировать ответ, основываясь исключительно на предоставленном контексте.  
16. Unit тестирование — это процесс проверки отдельных, наименьших частей (блоков) программы.  
17. URL-адрес — это уникальный адрес, который указывает точное местоположение ресурса или определенной функции сервера.  
18. Webhooks — это механизм автоматической передачи данных между разными IT-системами в реальном времени при наступлении определенных событий.  
19. Блок “Files” — встроенный в Langflow блок, позволяющий читать загруженные в Langflow файлы.   
20. ИИ — искусственный интеллект.  
21. Конструкция “Try-Except” — это механизм, который позволяет программе корректно реагировать на исключительные ситуации.  
22. Логирование схем — процесс отслеживания состояния схемы посредством записи в реальном времени ключевых событий и других данных, возникающих в ходе её работы  
23. Логический блок “If-else конструкция” — встроенный в Langflow блок, позволяющие выполнять разные команды в зависимости от условий  
24. Логический блок “Loop” — встроенный в Langflow блок, позволяющий выполнять определенную цепочку блоков определенное количество раз.  
25. Мониторинг модели — процесс отслеживания метрик качества для моделей ИИ.  
26. Обучающий pipeline — это последовательность шагов, которые преобразуют входные данные в готовую к использованию модель.